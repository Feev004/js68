<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <title>บันทึกรายรับ - รายจ่าย</title>
    </head>
    <style>
        .table-test {
            width: 90%;
            margin: 20px auto;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .table-test table {
            width: 100%;
            border-collapse: collapse;
        }
        .table-test th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px;
            text-align: center;
            font-weight: 600;
        }
        .table-test td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #e0e0e0;
        }
        .table-test tr:hover {
            background-color: #f5f5f5;
        }
        .center-h3 {
            text-align: center;
            padding: 15px;
            font-size: 20px;
            font-weight: bold;
            background-color: #f8f9fa;
            border-radius: 0 0 10px 10px;
        }
        .link {
            display: block;
            width: 100px;
            margin: 20px auto;
            text-align: center;
            padding: 10px;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
        }
        input{
            margin-bottom: 10px;
        }
        select{
            margin-bottom: 10px;
        }
    </style>
    <body>
        <div class="container mt-5">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0">บันทึกรายรับ - รายจ่าย</h3>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-md-4">
                            <input type="text" id="food" placeholder="รายการ เช่น อาหาร" class="form-control" />
                        </div>
                        <div class="col-md-3">
                            <input type="number" id="amount" placeholder="จำนวนเงิน" class="form-control" />
                        </div>
                        <div class="col-md-3">
                            <select id="type" class="form-select">
                                <option value="income">รายรับ(+)</option>
                                <option value="expense">รายจ่าย(-)</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <button onclick="addTransaction()" class="btn btn-primary w-100">บันทึก</button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="summary"></div>
            <a href="EX1.html" class="link">รีหน้าจอ</a>
        </div>
        <script>
            // let transactions = [];
            let transactions = [
                {description: 'ตังพ่อ', amount: 5000, type: 'income', date: '1/15/2026'},
                {description: 'food', amount: 50, type: 'income', date: '1/15/2026'},
                {description: 'food', amount: 50, type: 'expense', date: '1/15/2026'}
                // {description: 'ค่าเช่าห้อง', amount: 2000, type: 'expense', date: '1/16/2026'}
            ];
            function addTransaction() {
                let desc = document.getElementById("food").value;
                let amt = document.getElementById("amount").value;
                let typ = document.getElementById("type").value;

                let newItem = {
                    description: desc,
                    amount: parseFloat(amt),
                    type: typ,
                    date: new Date().toLocaleDateString(),
                };
                transactions.push(newItem); // เพิ่มรายการใหม่ลงในอาเรย์ transactions
                renderSummary();
                // document.getElementById("food").value = '';
                // document.getElementById("amount").value = '';
            }
            function renderSummary() {
                let table = `
                <div class="table-test">
                    <table>
                        <thead>
                            <tr>
                                <th>วันที่</th>
                                <th>รายการ</th>
                                <th>ประเภท</th>
                                <th>จำนวนเงิน</th>
                            </tr>
                        </thead>
                        <tbody>
                `;

                let totalBalance = 0;
                for (let i = 0; i < transactions.length; i++){
                    let item = transactions[i];
                    let color = (item.type === "income") ? "#28a745" : "#dc3545";
                    let sign = (item.type === "income") ? "+" : "-";
                    table += `
                        <tr>
                            <td>${item.date}</td>
                            <td>${item.description}</td>
                            <td style="color: ${color}; font-weight: bold;">${item.type}</td>
                            <td style="color: ${color}; font-weight: bold;">${sign}${item.amount}</td>
                        </tr>
                    `;
                    if (item.type === "income") {
                        totalBalance += item.amount;
                    } else {
                        totalBalance -= item.amount;
                    }
                }
                table += `</tbody></table></div>`;
                table += `<div class="center-h3">ยอดคงเหลือรวม: <span style="color: ${totalBalance > 0 ? '#28a745' : totalBalance === 0 ? '#000000' : '#dc3545'}">${totalBalance} บาท</span></div>`;
                document.getElementById("summary").innerHTML = table;
                console.log(transactions);
                
            }
            // window.addEventListener("load", renderSummary);
            renderSummary(transactions);
        </script>
    </body>
</html>
